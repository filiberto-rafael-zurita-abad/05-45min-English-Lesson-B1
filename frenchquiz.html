<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Leçon de Français A2: Le Futur Proche</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f8ff; 
            color: #333;
            scroll-behavior: smooth;
        }
        .lesson-section {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
        }
        body.paginated-view .lesson-section {
            display: none; 
        }
        body.paginated-view .lesson-section.active-section {
            display: block; 
            max-height: 75vh; /* Max height for single screen view */
            overflow-y: auto; /* Allow internal scroll if content exceeds max height */
            padding-bottom: 40px; /* Extra padding at bottom to avoid content being cut by global nav */
        }

        .lesson-section h2 {
            color: #2c5282; 
            border-bottom: 2px solid #a0aec0; 
            padding-bottom: 8px;
            margin-bottom: 20px;
        }
        .lesson-section h3 {
            color: #2d3748; 
            margin-top: 16px;
            margin-bottom: 12px;
        }
        .vocab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
        }
        .vocab-item {
            border: 1px solid #e2e8f0; 
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            background-color: #f7fafc; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; 
        }
        .vocab-item img { 
            width: 100%;
            height: 100px; 
            object-fit: cover; 
            border-radius: 6px;
            margin-bottom: 8px;
            background-color: #e2e8f0; 
        }
        .vocab-item p.vocab-term-display { 
            font-weight: 600; 
            color: #2c5282; 
            min-height: 40px; 
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: auto; 
        }
        .activity-input {
            border: 1px solid #cbd5e0; 
            border-radius: 6px;
            padding: 8px 12px;
            margin-top: 4px;
            margin-right: 8px; 
        }
        .sentence-container { 
            display: flex;
            flex-wrap: wrap; 
            align-items: center; 
            margin-bottom: 12px;
            padding-bottom: 8px; /* Space for feedback below */
            border-bottom: 1px dashed #e2e8f0; /* Separator for clarity */
        }
        .sentence-container:last-child {
            border-bottom: none;
        }
        .sentence-container label {
            flex-grow: 1; 
            margin-right: 8px; 
            margin-bottom: 4px; /* Space if button wraps */
        }
        .sentence-container .button-check-single {
            padding: 6px 10px;
            font-size: 0.8rem; /* Smaller check button */
            flex-shrink: 0; 
            background-color: #63b3ed; /* Lighter blue */
        }
        .sentence-container .button-check-single:hover {
            background-color: #4299e1;
        }


        .button {
            background-color: #4299e1; 
            color: white;
            padding: 10px 18px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 500;
        }
        .button:hover {
            background-color: #3182ce; 
        }
        .button:disabled {
            background-color: #cbd5e0; /* Lighter gray for disabled */
            color: #718096;
            cursor: not-allowed;
        }
        .button-secondary {
            background-color: #a0aec0; 
            color: white;
        }
        .button-secondary:hover {
            background-color: #718096; 
        }
        .lang-button-group { 
            padding: 8px 0;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }
        .lang-button {
            background-color: #e9ecef; 
            color: #2d3748; 
            padding: 6px 10px;
            margin: 4px; 
            border-radius: 6px;
            font-size: 0.85rem; 
            border: 1px solid #ced4da;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
        }
        .lang-button.active {
            background-color: #4299e1; 
            color: white;
            border-color: #3182ce;
        }
        .feedback { margin-top: 4px; padding: 6px; border-radius: 4px; font-size: 0.85rem; min-height: 28px; width:100%; }
        .feedback.correct { background-color: #c6f6d5; color: #2f855a; border: 1px solid #9ae6b4; }
        .feedback.incorrect { background-color: #fed7d7; color: #c53030; border: 1px solid #feb2b2; }
        .grammar-chart { background-color: #e6fffa; border-left: 4px solid #38b2ac; padding: 16px; border-radius: 8px; margin: 16px 0; }
        
        .flashcard-navigation { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .flashcard-navigation button { padding: 6px 10px; font-size: 0.85rem; } /* Smaller flashcard nav buttons */

        .flashcard-container { perspective: 1000px; width: 100%; max-width: 450px; height: 280px; margin: 15px auto; }
        .flashcard { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 0.7s cubic-bezier(0.4, 0.0, 0.2, 1); cursor: pointer; border-radius: 12px; box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
        .flashcard.is-flipped { transform: rotateY(180deg); }
        .flashcard-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; border-radius: 12px; text-align: center; overflow-y: auto; }
        .flashcard-front { background: linear-gradient(135deg, #63b3ed, #3b82f6); color: white; }
        .flashcard-back { background-color: #f0fff4; color: #2d3748; transform: rotateY(180deg); border: 1px solid #b2f5ea; }
        .flashcard-face h3 { color: inherit; margin-bottom: 10px;} 
        .flashcard-face ul { font-size: 0.9rem; }
        .flashcard-face p { font-size: 0.95rem; line-height: 1.6; }

        .question-option { display: block; width: 100%; text-align: left; padding: 10px; margin-bottom: 8px; border: 1px solid #e2e8f0; border-radius: 6px; cursor: pointer; }
        .question-option:hover { background-color: #f7fafc; }
        .question-option.correct { background-color: #c6f6d5; border-color: #9ae6b4; }
        .question-option.incorrect { background-color: #fed7d7; border-color: #feb2b2; }
        .decorative-image { width: 100%; height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 20px; background-color: #e2e8f0; }
        .img-loading-placeholder { width: 100%; height: 100px; background-color: #e2e8f0; border-radius: 6px; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; color: #a0aec0; }

        /* Pagination Controls */
        .global-pagination-controls {
            display: none; 
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
            padding: 8px 15px; /* Reduced padding */
            box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
            z-index: 100;
            text-align: center;
        }
        body.paginated-view .global-pagination-controls {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .global-pagination-controls button {
            padding: 8px 12px; /* Smaller global nav buttons */
            font-size: 0.9rem;
        }
        .internal-pagination-controls {
            margin-top: 15px;
            text-align: center;
        }
        .internal-pagination-controls button {
            padding: 5px 8px; /* Smaller internal nav buttons */
            font-size: 0.8rem;
            margin: 0 3px;
        }
        #toggle-view-mode {
            font-size: 0.9rem;
            padding: 8px 16px;
        }
    </style>
</head>
<body class="p-4 md:p-8"> <div class="max-w-4xl mx-auto">
        <header class="text-center mb-6">
            <img id="header-banner-img" src="https://placehold.co/800x200/63b3ed/ffffff?text=Leçon+de+Français&font=Inter&fontsize=40" alt="Bannière décorative" class="w-full h-48 object-cover rounded-lg shadow-md mb-4">
            <h1 class="text-4xl font-bold text-sky-700" data-translate-key="header.title">Leçon de Français A2: Le Futur Proche</h1>
            <p class="text-xl text-slate-600 mt-2" data-translate-key="header.subtitle">Apprenons à parler de nos plans futurs !</p>
        </header>

        <div class="text-center mb-6">
            <button id="toggle-view-mode" class="button"></button> 
        </div>

        <div id="lesson-content-wrapper"> <section id="vocabulaire" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-vocabSection"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="vocabSection.title">1. Vocabulaire du Week-end</h2>
                <p class="mb-4" data-translate-key="vocabSection.intro">Voici quelques mots et expressions utiles pour parler de tes activités. Le mot en français est affiché sous l'image.</p>
                <div id="vocab-grid-container" class="vocab-grid"></div>
                <p class="mt-4 text-sm text-slate-500" data-translate-key="vocabSection.imgSource">Images générées par <a href="https://placehold.co" target="_blank" class="text-sky-600 hover:underline">placehold.co</a>.</p>
            </section>

            <section id="vocab-activite-1" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-vocabActivity1"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="vocabActivity1.title">2. Activité Vocabulaire 1: Relie les images et les mots</h2>
                <p class="mb-4" data-translate-key="vocabActivity1.intro">Regarde les images (le texte dans l'image est dans la langue sélectionnée). Écris le mot français correct (de la banque de mots ci-dessous) sous chaque image. <strong>Répondez en français.</strong></p>
                <div id="vocab-activity1-wordbank-container" class="mb-4 p-3 bg-sky-100 rounded-md">
                    <h3 class="font-semibold"><span data-translate-key="vocabActivity1.wordbankTitle">Banque de mots</span> (<span id="wordbank-lang-indicator">Français</span>) :</h3>
                    <p id="vocab-activity1-wordbank-text"></p>
                </div>
                <div id="vocab-activity1-grid" class="vocab-grid"></div>
                <button id="check-vocab1-button" class="button mt-6" data-translate-key="vocabActivity1.checkAnswersBtn">Vérifier mes réponses</button>
            </section>

            <section id="grammaire" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-grammarSection"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="grammarSection.title">3. Grammaire: Le Futur Proche</h2>
                <p class="mb-2" data-translate-key="grammarSection.intro">Le <strong>futur proche</strong> est utilisé pour parler d'actions qui vont se passer très bientôt, ou de plans et intentions.</p>
                <h3 class="text-xl font-medium mt-4" data-translate-key="grammarSection.howToFormTitle">Comment former le Futur Proche ?</h3>
                <p data-translate-key="grammarSection.howToFormExplanation">C'est facile ! On utilise le verbe <strong>ALLER</strong> (conjugué au présent) + le <strong>verbe principal à l'infinitif</strong>.</p>
                <div class="grammar-chart">
                    <p class="font-semibold text-lg"><span data-translate-key="grammarSection.structureTitle">Structure</span> : <code class="bg-slate-200 p-1 rounded">Sujet + aller (présent) + infinitif</code></p>
                    <ul class="list-disc list-inside mt-2 space-y-1">
                        <li>Je <strong>vais</strong> manger</li> <li>Tu <strong>vas</strong> regarder</li> <li>Il/Elle/On <strong>va</strong> étudier</li>
                        <li>Nous <strong>allons</strong> jouer</li> <li>Vous <strong>allez</strong> voyager</li> <li>Ils/Elles <strong>vont</strong> sortir</li>
                    </ul>
                </div>
                <h3 class="text-xl font-medium mt-4" data-translate-key="grammarSection.examplesTitle">Exemples :</h3>
                <ul class="list-disc list-inside space-y-1">
                    <li>Ce soir, je <strong>vais regarder</strong> un film.</li>
                    <li>Demain, nous <strong>allons visiter</strong> le musée.</li>
                    <li>Attention ! Tu <strong>vas tomber</strong> !</li>
                </ul>
                <img id="grammar-decorative-img" src="https://placehold.co/600x150/38b2ac/ffffff?text=Grammaire+Visuelle&font=Inter&fontsize=30" alt="Planning" class="decorative-image mt-4">
            </section>

            <section id="vocab-activite-2" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-vocabActivity2"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="vocabActivity2.title">4. Activité Vocabulaire 2: Complète les phrases</h2>
                <p class="mb-4" data-translate-key="vocabActivity2.intro">Utilise les mots du vocabulaire pour compléter les phrases suivantes (affichées dans la langue sélectionnée). Pense au futur proche ! <strong>Répondez en français.</strong></p>
                <div id="vocab-activity2-sentences" class="space-y-2"></div> <div id="vocab-activity2-pagination" class="internal-pagination-controls"></div>
                </section>

            <section id="pratique-orale-1" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-speakingPractice"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="speakingPractice.title">5. Pratique Orale</h2>
                <p class="mb-4" data-translate-key="speakingPractice.intro">Réponds à ces questions à voix haute. Utilise le futur proche !</p>
                <ul class="list-disc list-inside space-y-3">
                    <li data-translate-key="speakingPractice.q1">Qu'est-ce que tu <strong>vas faire</strong> ce week-end ?</li>
                    <li data-translate-key="speakingPractice.q2">Avec qui <strong>vas-tu passer</strong> ton temps libre samedi prochain ?</li>
                    <li data-translate-key="speakingPractice.q3">Où <strong>vas-tu aller</strong> pendant les prochaines vacances scolaires ?</li>
                    <li data-translate-key="speakingPractice.q4">Qu'est-ce que tu <strong>vas manger</strong> pour le dîner ce soir ?</li>
                    <li data-translate-key="speakingPractice.q5">Quel film ou série <strong>vas-tu regarder</strong> bientôt ?</li>
                </ul>
            </section>

            <section id="pratique-ecoute" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-listeningPractice"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="listeningPractice.title">6. Pratique d'Écoute</h2>
                <p class="mb-2" data-translate-key="listeningPractice.intro">Ton professeur va lire des questions. Écoute attentivement et essaie de répondre. Si tu as besoin d'aide, clique sur la carte pour voir le texte.</p>
                <div class="flashcard-navigation">
                    <button id="prev-flashcard" class="button button-secondary">&lt; <span data-translate-key="listeningPractice.prevBtn">Précédent</span></button>
                    <span id="flashcard-indicator" class="text-slate-600 font-medium">Carte 1 / 3</span>
                    <button id="next-flashcard" class="button button-secondary"><span data-translate-key="listeningPractice.nextBtn">Suivant</span> &gt;</button>
                </div>
                <div class="text-center mb-4">
                    <button id="toggle-questions-visibility" class="button button-secondary text-sm">
                        <i class="fas fa-eye"></i> <span data-translate-key="listeningPractice.toggleBtn">Afficher/Cacher les Questions</span>
                    </button>
                </div>
                <div class="flashcard-container">
                    <div id="listening-flashcard" class="flashcard">
                        <div class="flashcard-face flashcard-front" id="flashcard-front-content"></div>
                        <div class="flashcard-face flashcard-back" id="flashcard-back-content"></div>
                    </div>
                </div>
            </section>

            <section id="lecture-activite-1" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-reading1"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="reading1.title">7. Lecture 1: Un dialogue</h2>
                <p class="mb-4" data-translate-key="reading1.intro">Lisez ce dialogue et répondez aux questions.</p>
                <div class="dialogue-box p-4 bg-sky-50 rounded-lg border border-sky-200 mb-4">
                    <p><strong data-translate-key="reading1.dialogue.annaName">Anna :</strong> <span data-translate-key="reading1.dialogue.anna1">Salut Léo ! Qu'est-ce que tu <strong>vas faire</strong> ce soir ?</span></p>
                    <p><strong data-translate-key="reading1.dialogue.leoName">Léo :</strong> <span data-translate-key="reading1.dialogue.leo1">Salut Anna ! Je <strong>vais regarder</strong> un nouveau film à la maison. Et toi ?</span></p>
                    <p><strong data-translate-key="reading1.dialogue.annaName">Anna :</strong> <span data-translate-key="reading1.dialogue.anna2">Moi, je <strong>vais aller</strong> au restaurant avec mes parents. On <strong>va manger</strong> des pizzas.</span></p>
                    <p><strong data-translate-key="reading1.dialogue.leoName">Léo :</strong> <span data-translate-key="reading1.dialogue.leo2">Super ! Tu <strong>vas aimer</strong>. Le film que je <strong>vais regarder</strong> est une comédie.</span></p>
                    <p><strong data-translate-key="reading1.dialogue.annaName">Anna :</strong> <span data-translate-key="reading1.dialogue.anna3">Amuse-toi bien !</span></p>
                    <p><strong data-translate-key="reading1.dialogue.leoName">Léo :</strong> <span data-translate-key="reading1.dialogue.leo3">Toi aussi !</span></p>
                </div>
                <div id="reading1-questions" class="space-y-3"></div>
            </section>

            <section id="lecture-activite-2" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-reading2"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="reading2.title">8. Lecture 2: Un article intéressant</h2>
                <p class="mb-4" data-translate-key="reading2.intro">Lisez cet article et répondez aux questions.</p>
                <img id="reading2-decorative-img" src="https://placehold.co/600x150/48bb78/ffffff?text=Article+Intéressant&font=Inter&fontsize=30" alt="Ecology" class="decorative-image">
                <div class="article-box p-4 bg-emerald-50 rounded-lg border border-emerald-200 mb-4">
                    <h3 class="text-xl font-semibold mb-2" data-translate-key="reading2.articleTitle">Un week-end écologique : Que vas-tu faire pour la planète ?</h3>
                    <p data-translate-key="reading2.articleContent">Ce week-end, beaucoup de personnes <strong>vont participer</strong> à des actions écologiques. Par exemple, certains <strong>vont nettoyer</strong> une plage. D'autres <strong>vont planter</strong> des arbres dans un parc. Toi aussi, tu peux faire des petits gestes : tu <strong>vas trier</strong> tes déchets, tu <strong>vas utiliser</strong> moins d'eau, ou tu <strong>vas aller</strong> faire tes courses à vélo. Chaque action est importante pour notre futur !</p>
                </div>
                <div id="reading2-questions" class="space-y-3"></div>
            </section>

            <section id="petites-activites" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-shortActivities"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="shortActivities.title">9. Petites Activités Créatives</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="p-4 bg-amber-50 rounded-lg border border-amber-200">
                        <h3 class="text-lg font-semibold mb-2"><i class="fas fa-gamepad mr-2"></i><span data-translate-key="shortActivities.gameTitle">Jeu: Tic-Tac-Futur</span></h3>
                        <div data-translate-key="shortActivities.gameIntro"><p><strong>Comment jouer :</strong> Dessinez une grille de Tic-Tac-Toe (Morpion). Dans chaque case, écrivez un verbe à l'infinitif (ex: manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir).</p><p>Pour marquer une case (X ou O), vous devez faire une phrase correcte au futur proche avec le verbe de cette case. Par exemple, si la case contient "manger", vous pouvez dire: "Ce soir, je vais manger des pâtes."</p><p>Le premier joueur à aligner trois de ses marques gagne !</p></div>
                    </div>
                    <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                        <h3 class="text-lg font-semibold mb-2"><i class="fas fa-comments mr-2"></i><span data-translate-key="shortActivities.roleplayTitle">Jeu de Rôle: Organiser une sortie</span></h3>
                        <div data-translate-key="shortActivities.roleplayIntro"><p><strong>Instructions :</strong> Travaillez avec un partenaire.</p><p><strong>Étudiant A :</strong> Tu veux organiser une sortie pour le week-end. Propose quelque chose à l'Étudiant B. Utilise le futur proche.</p><p><em>Exemple A : "Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?"</em></p><p><strong>Étudiant B :</strong> Réponds à l'Étudiant A. Dis ce que tu <strong>vas faire</strong> ou propose une alternative. Utilise le futur proche.</p><p><em>Exemple B : \"Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?\"</em></p></div>
                    </div>
                </div>
            </section>

            <section id="conclusion" class="lesson-section">
                <div class="lang-button-group" id="lang-buttons-conclusion"></div>
                <h2 class="text-2xl font-semibold" data-translate-key="conclusion.title">10. Conclusion et Prochainement</h2>
                <h3 class="text-lg font-semibold" data-translate-key="conclusion.reflectionTitle">Réflexion :</h3>
                <ul class="list-disc list-inside space-y-2 mb-4">
                    <li data-translate-key="conclusion.reflectionQ1">Qu'as-tu appris aujourd'hui sur le futur proche ?</li>
                    <li data-translate-key="conclusion.reflectionQ2">Quelles activités <strong>vas-tu faire</strong> en utilisant le futur proche cette semaine ? (Pense à 2-3 choses)</li>
                </ul>
                <h3 class="text-lg font-semibold" data-translate-key="conclusion.nextLessonTitle">Aperçu de la prochaine leçon :</h3>
                <p data-translate-key="conclusion.nextLessonText">Bravo pour ton travail aujourd'hui ! La prochaine fois, nous allons explorer une autre façon de parler du futur : <strong>le futur simple</strong>. Nous verrons quand l'utiliser et comment le former.</p>
                <p class="mt-2" data-translate-key="conclusion.goodbye">À bientôt !</p>
            </section>
        </div> <div class="global-pagination-controls" id="global-pagination-controls">
            <button id="prev-section-btn" class="button">&lt; <span data-translate-key="pagination.prevSection">Section Précédente</span></button>
            <span id="global-section-indicator" class="text-slate-700 font-medium">Section 1 / N</span>
            <button id="next-section-btn" class="button"><span data-translate-key="pagination.nextSection">Section Suivante</span> &gt;</button>
        </div>

        <footer class="text-center mt-12 mb-6">
            <p class="text-sm text-slate-500">&copy; 2024 Leçon de Français Interactive. Tous droits réservés (pour la structure).</p>
        </footer>
    </div>

<script>
// --- DATA ---
const vocabulary = [
    {
        fr: "aller au cinéma", en: "go to the cinema", es: "ir al cine", ja: "映画館に行く", zh: "去看电影", ko: "영화 보러 가다", color: "4299e1",
        sentenceParts: { fr: { start: "Ce week-end, nous ", end: " pour voir un film d'action." }, en: { start: "This weekend, we ", end: " to see an action movie." }, es: { start: "Este fin de semana, nosotros ", end: " para ver una película de acción." }, ja: { start: "今週末、私たちは ", end: " アクション映画を見に行きます。" }, zh: { start: "这个周末，我们 ", end: " 去看一部动作片。" }, ko: { start: "이번 주말에 우리는 ", end: " 액션 영화를 보러 갈 거예요." }}
    },
    {
        fr: "visiter un musée", en: "visit a museum", es: "visitar un museo", ja: "博物館を訪れる", zh: "参观博物馆", ko: "박물관을 방문하다", color: "f56565",
        sentenceParts: { fr: { start: "Demain après-midi, elle ", end: " avec sa classe." }, en: { start: "Tomorrow afternoon, she ", end: " with her class." }, es: { start: "Mañana por la tarde, ella ", end: " con su clase." }, ja: { start: "明日の午後、彼女はクラスと一緒に ", end: "。" }, zh: { start: "明天下午，她将和她的班级一起 ", end: "。" }, ko: { start: "내일 오후에 그녀는 반 친구들과 함께 ", end: " 거예요." }}
    },
    {
        fr: "faire du sport", en: "do sports", es: "hacer deporte", ja: "スポーツをする", zh: "做运动", ko: "운동을 하다", color: "48bb78",
        sentenceParts: { fr: { start: "Pour rester en forme, je ", end: " trois fois par semaine." }, en: { start: "To stay in shape, I ", end: " three times a week." }, es: { start: "Para mantenerme en forma, yo ", end: " tres veces por semana." }, ja: { start: "健康を維持するために、私は週に3回 ", end: "。" }, zh: { start: "为了保持体形，我每周 ", end: " 三次。" }, ko: { start: "건강을 유지하기 위해 저는 일주일에 세 번 ", end: " 거예요." }}
    },
    {
        fr: "lire un livre", en: "read a book", es: "leer un libro", ja: "本を読む", zh: "读书", ko: "책을 읽다", color: "ed8936",
        sentenceParts: { fr: { start: "Pendant son temps libre, il ", end: " dans le parc." }, en: { start: "During his free time, he ", end: " in the park." }, es: { start: "Durante su tiempo libre, él ", end: " en el parque." }, ja: { start: "暇な時、彼は公園で ", end: "。" }, zh: { start: "在他的空闲时间，他在公园里 ", end: "。" }, ko: { start: "여가 시간에 그는 공원에서 ", end: " 거예요." }}
    },
    {
        fr: "rencontrer des amis", en: "meet friends", es: "encontrarse con amigos", ja: "友達に会う", zh: "见朋友", ko: "친구를 만나다", color: "9f7aea",
        sentenceParts: { fr: { start: "Samedi soir, tu ", end: " au café ?" }, en: { start: "Saturday evening, are you ", end: " at the cafe?" }, es: { start: "El sábado por la noche, ¿tú ", end: " en el café?" }, ja: { start: "土曜の夜、カフェで ", end: "？" }, zh: { start: "周六晚上，你 ", end: " 在咖啡馆吗？" }, ko: { start: "토요일 저녁에 너는 카페에서 ", end: " 거야?" }}
    },
    {
        fr: "cuisiner un gâteau", en: "bake a cake", es: "cocinar un pastel", ja: "ケーキを焼く", zh: "做蛋糕", ko: "케이크를 굽다", color: "ed64a6",
        sentenceParts: { fr: { start: "Pour la fête, mes parents ", end: " au chocolat." }, en: { start: "For the party, my parents ", end: " a chocolate one." }, es: { start: "Para la fiesta, mis padres ", end: " uno de chocolate." }, ja: { start: "パーティーのために、私の両親はチョコレートの ", end: "。" }, zh: { start: "为了聚会，我的父母 ", end: " 一个巧克力味的。" }, ko: { start: "파티를 위해 부모님은 초콜릿 ", end: " 거예요." }}
    },
    {
        fr: "regarder la télévision", en: "watch television", es: "ver la televisión", ja: "テレビを見る", zh: "看电视", ko: "텔레비전을 보다", color: "a0aec0",
        sentenceParts: { fr: { start: "Après l'école, les enfants ", end: " un dessin animé." }, en: { start: "After school, the children ", end: " a cartoon." }, es: { start: "Después de la escuela, los niños ", end: " un dibujo animado." }, ja: { start: "放課後、子供たちはアニメを ", end: "。" }, zh: { start: "放学后，孩子们 ", end: " 卡通片。" }, ko: { start: "방과 후에 아이들은 만화를 ", end: " 거예요." }}
    },
    {
        fr: "voyager", en: "travel", es: "viajar", ja: "旅行する", zh: "旅行", ko: "여행하다", color: "ecc94b",
        sentenceParts: { fr: { start: "L'année prochaine, vous ", end: " en Espagne ?" }, en: { start: "Next year, are you ", end: " to Spain?" }, es: { start: "El próximo año, ¿ustedes ", end: " a España?" }, ja: { start: "来年、スペインに ", end: "？" }, zh: { start: "明年，你们 ", end: " 去西班牙吗？" }, ko: { start: "내년에 당신은 스페인으로 ", end: " 거예요?" }}
    }
];
const languages = [
    { code: 'fr', name: 'Français' }, { code: 'en', name: 'English' }, { code: 'es', name: 'Español' },
    { code: 'ja', name: '日本語' }, { code: 'zh', name: '中文' }, { code: 'ko', name: '한국어' }
];
let currentLang = 'fr';
let isPaginatedViewActive = false;
let currentSectionIndex = 0;
let lessonSections = []; 

const vocabActivity2ItemsPerPage = 3; 
let currentVocabActivity2Page = 0;

const listeningFlashcardData = [
    { id: 0, questionsKey: 'listeningPractice.flashcards.0.questions', textKey: 'listeningPractice.flashcards.0.text', numQuestions: 3 },
    { id: 1, questionsKey: 'listeningPractice.flashcards.1.questions', textKey: 'listeningPractice.flashcards.1.text', numQuestions: 3 },
    { id: 2, questionsKey: 'listeningPractice.flashcards.2.questions', textKey: 'listeningPractice.flashcards.2.text', numQuestions: 3 }
];
let currentFlashcardIndex = 0;


const translations = { 
    pageTitle: { fr: "Leçon de Français A2: Le Futur Proche", en: "French Lesson A2: The Near Future", es: "Lección de Francés A2: El Futuro Próximo", ja: "フランス語レッスンA2：近接未来", zh: "法语A2课：最近将来时", ko: "프랑스어 A2 수업: 가까운 미래 시제" },
    header: {
        title: { fr: "Leçon de Français A2: Le Futur Proche", en: "French Lesson A2: The Near Future", es: "Lección de Francés A2: El Futuro Próximo", ja: "フランス語レッスンA2：近接未来", zh: "法语A2课：最近将来时", ko: "프랑스어 A2 수업: 가까운 미래 시제" },
        subtitle: { fr: "Apprenons à parler de nos plans futurs !", en: "Let's learn to talk about our future plans!", es: "¡Aprendamos a hablar de nuestros planes futuros!", ja: "未来の計画について話せるようになりましょう！", zh: "让我们学习讨论未来的计划！", ko: "미래 계획에 대해 이야기하는 법을 배워봅시다!" }
    },
    pagination: {
        togglePaginatedView: { fr: "Vue Écran Unique", en: "Single-Screen View", es: "Vista de Pantalla Única", ja: "シングルスクリーン表示", zh: "单屏视图", ko: "단일 화면 보기"},
        toggleScrollView: { fr: "Vue Complète (Défilement)", en: "Full Scroll View", es: "Vista de Desplazamiento Completo", ja: "フルスクロール表示", zh: "完整滚动视图", ko: "전체 스크롤 보기"},
        prevSection: { fr: "Section Précédente", en: "Previous Section", es: "Sección Anterior", ja: "前のセクション", zh: "上一节", ko: "이전 섹션"},
        nextSection: { fr: "Section Suivante", en: "Next Section", es: "Sección Siguiente", ja: "次のセクション", zh: "下一节", ko: "다음 섹션"},
        prevPage: { fr: "Page Préc.", en: "Prev. Page", es: "Pág. Ant.", ja: "前ページ", zh: "上一页", ko: "이전 페이지"},
        nextPage: { fr: "Page Suiv.", en: "Next Page", es: "Pág. Sig.", ja: "次ページ", zh: "下一页", ko: "다음 페이지"},
        pageIndicator: {fr: "Page {current} / {total}", en: "Page {current} / {total}", es: "Página {current} / {total}", ja: "ページ {current} / {total}", zh: "页 {current} / {total}", ko: "페이지 {current} / {total}"}
    },
    vocabSection: {
        title: { fr: "1. Vocabulaire du Week-end", en: "1. Weekend Vocabulary", es: "1. Vocabulario del Fin de Semana", ja: "1. 週末の語彙", zh: "1. 周末词汇", ko: "1. 주말 어휘" },
        intro: { fr: "Voici quelques mots et expressions utiles pour parler de tes activités. Le mot en français est affiché sous l'image.", en: "Here are some useful words and expressions to talk about your activities. The French word is displayed below the image.", es: "Aquí tienes algunas palabras y expresiones útiles para hablar de tus actividades. La palabra en francés se muestra debajo de la imagen.", ja: "アクティビティについて話すのに役立つ単語や表現をいくつか紹介します。フランス語の単語は画像の下に表示されます。", zh: "这里有一些有用的单词和表达方式来谈论您的活动。法语单词显示在图片下方。", ko: "활동에 대해 이야기하는 데 유용한 단어와 표현입니다. 프랑스어 단어는 이미지 아래에 표시됩니다." },
        imgSource: { fr: "Images générées par <a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a>.", en: "Images generated by <a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a>.", es: "Imágenes generadas por <a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a>.", ja: "<a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a> によって生成された画像。", zh: "图片由 <a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a> 生成。", ko: "<a href='https://placehold.co' target='_blank' class='text-sky-600 hover:underline'>placehold.co</a>에서 생성된 이미지."}
    },
    vocabActivity1: {
        title: { fr: "2. Activité Vocabulaire 1: Relie les images et les mots", en: "2. Vocabulary Activity 1: Match images and words", es: "2. Actividad de Vocabulario 1: Relaciona imágenes y palabras", ja: "2. 語彙アクティビティ1：画像と言葉を結びつけましょう", zh: "2. 词汇活动1：图文配对", ko: "2. 어휘 활동 1: 그림과 단어 연결하기" },
        intro: { fr: "Regarde les images (le texte dans l'image est dans la langue sélectionnée). Écris le mot français correct (de la banque de mots ci-dessous) sous chaque image. <strong>Répondez en français.</strong>", en: "Look at the images (the text in the image is in the selected language). Write the correct French word (from the word bank below) under each image. <strong>Answer in French.</strong>", es: "Mira las imágenes (el texto en la imagen está en el idioma seleccionado). Escribe la palabra correcta en francés (del banco de palabras de abajo) debajo de cada imagen. <strong>Responde en francés.</strong>", ja: "画像を見てください（画像内のテキストは選択した言語で表示されます）。各画像の下に、正しいフランス語の単語（下の単語バンクから）を書いてください。<strong>フランス語で答えてください。</strong>", zh: "看图片（图片中的文字是所选语言）。在每张图片下方写出正确的法语单词（来自下面的词库）。<strong>请用法语回答。</strong>", ko: "그림을 보세요(그림 속 텍스트는 선택한 언어로 표시됩니다). 각 그림 아래에 올바른 프랑스어 단어(아래 단어 은행에서)를 쓰세요. <strong>프랑스어로 답하세요.</strong>" },
        wordbankTitle: { fr: "Banque de mots", en: "Word Bank", es: "Banco de palabras", ja: "単語バンク", zh: "词库", ko: "단어 은행"},
        checkAnswersBtn: { fr: "Vérifier mes réponses", en: "Check my answers", es: "Verificar mis respuestas", ja: "答えを確認する", zh: "检查答案", ko: "답변 확인" }
    },
    grammarSection: {
        title: { fr: "3. Grammaire: Le Futur Proche", en: "3. Grammar: The Near Future", es: "3. Gramática: El Futuro Próximo", ja: "3. 文法：近接未来", zh: "3. 语法：最近将来时", ko: "3. 문법: 가까운 미래 시제" },
        intro: { fr: "Le <strong>futur proche</strong> est utilisé pour parler d'actions qui vont se passer très bientôt, ou de plans et intentions.", en: "The <strong>near future</strong> is used to talk about actions that will happen very soon, or plans and intentions.", es: "El <strong>futuro próximo</strong> se utiliza para hablar de acciones que van a suceder muy pronto, o de planes e intenciones.", ja: "<strong>近接未来</strong>は、もうすぐ起こる行動や計画、意図について話すために使われます。", zh: "<strong>最近将来时</strong>用于谈论即将发生的行为，或计划和意图。", ko: "<strong>가까운 미래 시제</strong>는 곧 일어날 행동이나 계획, 의도에 대해 이야기할 때 사용됩니다." },
        howToFormTitle: { fr: "Comment former le Futur Proche ?", en: "How to form the Near Future?", es: "¿Cómo formar el Futuro Próximo?", ja: "近接未来の作り方は？", zh: "如何构成最近将来时？", ko: "가까운 미래 시제는 어떻게 만드나요?" },
        howToFormExplanation: { fr: "C'est facile ! On utilise le verbe <strong>ALLER</strong> (conjugué au présent) + le <strong>verbe principal à l'infinitif</strong>.", en: "It's easy! We use the verb <strong>ALLER</strong> (conjugated in the present tense) + the <strong>main verb in the infinitive</strong>.", es: "¡Es fácil! Usamos el verbo <strong>ALLER</strong> (conjugado en presente) + el <strong>verbo principal en infinitivo</strong>.", ja: "簡単です！<strong>ALLER</strong>動詞（現在形で活用）+ <strong>主動詞の不定詞</strong>を使います。", zh: "很简单！我们使用动词<strong>ALLER</strong>（现在时变位）+ <strong>主要动词的不定式</strong>。", ko: "쉽습니다! <strong>ALLER</strong> 동사(현재 시제로 활용) + <strong>주요 동사의 부정사</strong>를 사용합니다." },
        structureTitle: { fr: "Structure", en: "Structure", es: "Estructura", ja: "構造", zh: "结构", ko: "구조" },
        examplesTitle: { fr: "Exemples", en: "Examples", es: "Ejemplos", ja: "例", zh: "例子", ko: "예시" }
    },
    vocabActivity2: {
        title: { fr: "4. Activité Vocabulaire 2: Complète les phrases", en: "4. Vocabulary Activity 2: Complete the sentences", es: "4. Actividad de Vocabulario 2: Completa las frases", ja: "4. 語彙アクティビティ2：文を完成させましょう", zh: "4. 词汇活动2：完成句子", ko: "4. 어휘 활동 2: 문장 완성하기" },
        intro: { fr: "Utilise les mots du vocabulaire pour compléter les phrases suivantes (affichées dans la langue sélectionnée). Pense au futur proche ! <strong>Répondez en français.</strong>", en: "Use the vocabulary words to complete the following sentences (displayed in the selected language). Think about the near future! <strong>Answer in French.</strong>", es: "Usa las palabras del vocabulario para completar las siguientes frases (mostradas en el idioma seleccionado). ¡Piensa en el futuro próximo! <strong>Responde en francés.</strong>", ja: "次の文（選択した言語で表示）を完成させるために語彙の単語を使用してください。近接未来を考えてください！<strong>フランス語で答えてください。</strong>", zh: "使用词汇表中的单词完成以下句子（以所选语言显示）。思考最近将来时！<strong>请用法语回答。</strong>", ko: "어휘 단어를 사용하여 다음 문장(선택한 언어로 표시)을 완성하세요. 가까운 미래 시제를 생각하세요! <strong>프랑스어로 답하세요.</strong>" },
        checkAnswerBtn: { fr: "Vérifier", en: "Check", es: "Verificar", ja: "確認", zh: "检查", ko: "확인" } 
    },
    speakingPractice: {
        title: { fr: "5. Pratique Orale", en: "5. Speaking Practice", es: "5. Práctica Oral", ja: "5. 会話練習", zh: "5. 口语练习", ko: "5. 말하기 연습" },
        intro: { fr: "Réponds à ces questions à voix haute. Utilise le futur proche !", en: "Answer these questions out loud. Use the near future!", es: "Responde estas preguntas en voz alta. ¡Usa el futuro próximo!", ja: "これらの質問に声に出して答えてください。近接未来を使って！", zh: "大声回答这些问题。使用最近将来时！", ko: "이 질문에 큰 소리로 답하세요. 가까운 미래 시제를 사용하세요!" },
        q1: { fr: "Qu'est-ce que tu <strong>vas faire</strong> ce week-end ?", en: "What are you <strong>going to do</strong> this weekend?", es: "¿Qué <strong>vas a hacer</strong> este fin de semana?", ja: "今週末、何を<strong>するつもり</strong>ですか？", zh: "这个周末你<strong>打算做什么</strong>？", ko: "이번 주말에 무엇을 <strong>할 거예요</strong>?" },
        q2: { fr: "Avec qui <strong>vas-tu passer</strong> ton temps libre samedi prochain ?", en: "With whom are you <strong>going to spend</strong> your free time next Saturday?", es: "¿Con quién <strong>vas a pasar</strong> tu tiempo libre el próximo sábado?", ja: "次の土曜日、誰と自由時間を<strong>過ごすつもり</strong>ですか？", zh: "下周六你<strong>打算和谁一起度过</strong>空闲时间？", ko: "다음 주 토요일에 누구와 자유 시간을 <strong>보낼 거예요</strong>?" },
        q3: { fr: "Où <strong>vas-tu aller</strong> pendant les prochaines vacances scolaires ?", en: "Where are you <strong>going to go</strong> during the next school holidays?", es: "¿A dónde <strong>vas a ir</strong> durante las próximas vacaciones escolares?", ja: "次の学校の休みにどこへ<strong>行くつもり</strong>ですか？", zh: "下个学校假期你<strong>打算去哪里</strong>？", ko: "다음 방학 때 어디로 <strong>갈 거예요</strong>?" },
        q4: { fr: "Qu'est-ce que tu <strong>vas manger</strong> pour le dîner ce soir ?", en: "What are you <strong>going to eat</strong> for dinner tonight?", es: "¿Qué <strong>vas a comer</strong> para la cena esta noche?", ja: "今夜の夕食に何を<strong>食べるつもり</strong>ですか？", zh: "今晚晚餐你<strong>打算吃什么</strong>？", ko: "오늘 저녁으로 무엇을 <strong>먹을 거예요</strong>?" },
        q5: { fr: "Quel film ou série <strong>vas-tu regarder</strong> bientôt ?", en: "What movie or series are you <strong>going to watch</strong> soon?", es: "¿Qué película o serie <strong>vas a ver</strong> pronto?", ja: "もうすぐどんな映画やシリーズを<strong>見るつもり</strong>ですか？", zh: "你很快<strong>打算看什么</strong>电影或连续剧？", ko: "곧 어떤 영화나 시리즈를 <strong>볼 거예요</strong>?" }
    },
    listeningPractice: {
        title: { fr: "6. Pratique d'Écoute", en: "6. Listening Practice", es: "6. Práctica de Escucha", ja: "6. リスニング練習", zh: "6. 听力练习", ko: "6. 듣기 연습" },
        intro: { fr: "Ton professeur va lire des questions. Écoute attentivement et essaie de répondre. Si tu as besoin d'aide, clique sur la carte pour voir le texte.", en: "Your teacher will read questions. Listen carefully and try to answer. If you need help, click the card to see the text.", es: "Tu profesor leerá preguntas. Escucha atentamente e intenta responder. Si necesitas ayuda, haz clic en la tarjeta para ver el texto.", ja: "先生が質問を読み上げます。注意深く聞いて答えてみてください。助けが必要な場合は、カードをクリックしてテキストを見てください。", zh: "你的老师会读问题。仔细听并尝试回答。如果需要帮助，请点击卡片查看文本。", ko: "선생님이 질문을 읽을 것입니다. 주의 깊게 듣고 답해 보세요. 도움이 필요하면 카드를 클릭하여 텍스트를 확인하세요." },
        prevBtn: { fr: "Précédent", en: "Previous", es: "Anterior", ja: "前へ", zh: "上一个", ko: "이전"},
        nextBtn: { fr: "Suivant", en: "Next", es: "Siguiente", ja: "次へ", zh: "下一个", ko: "다음"},
        cardIndicator: { fr: "Carte {current} / {total}", en: "Card {current} / {total}", es: "Tarjeta {current} / {total}", ja: "カード {current} / {total}", zh: "卡片 {current} / {total}", ko: "카드 {current} / {total}"},
        toggleBtn: { fr: "Afficher/Cacher les Questions", en: "Show/Hide Questions", es: "Mostrar/Ocultar Preguntas", ja: "質問を表示/非表示", zh: "显示/隐藏问题", ko: "질문 표시/숨기기" },
        cardFrontTitle: { fr: "Questions d'écoute", en: "Listening Questions", es: "Preguntas de escucha", ja: "リスニングの質問", zh: "听力问题", ko: "듣기 질문" },
        cardFrontInstruction: { fr: "(Cliquez pour voir le texte)", en: "(Click to see the text)", es: "(Haz clic para ver el texto)", ja: "（クリックしてテキストを表示）", zh: "（点击查看文本）", ko: "(텍스트를 보려면 클릭하세요)" },
        cardBackTitle: { fr: "Texte d'écoute :", en: "Listening Text:", es: "Texto de escucha:", ja: "リスニングテキスト：", zh: "听力文本：", ko: "듣기 텍스트:" },
        flashcards: [ 
            { 
                questions: [ 
                    { fr: "Où va Marc samedi matin ?", en: "Where is Marc going on Saturday morning?", es: "¿A dónde va Marc el sábado por la mañana?", ja: "マークは土曜の朝どこへ行きますか？", zh: "马克周六早上要去哪里？", ko: "마크는 토요일 아침에 어디로 가나요?" },
                    { fr: "Qu'est-ce qu'il va faire l'après-midi ?", en: "What is he going to do in the afternoon?", es: "¿Qué va a hacer por la tarde?", ja: "彼は午後に何をしますか？", zh: "他下午要做什么？", ko: "그는 오후에 무엇을 할 건가요?" },
                    { fr: "Avec qui va-t-il dîner ?", en: "With whom is he going to have dinner?", es: "¿Con quién va a cenar?", ja: "彼は誰と夕食をとりますか？", zh: "他要和谁一起吃晚饭？", ko: "그는 누구와 저녁을 먹을 건가요?" }
                ],
                text: { fr: "\"Bonjour ! C'est Marc. Samedi matin, je <strong>vais aller</strong> au marché pour acheter des fruits. L'après-midi, je <strong>vais lire</strong> un nouveau roman policier dans le jardin. Le soir, je <strong>vais dîner</strong> avec ma famille au restaurant italien.\"", en: "\"Hello! It's Marc. On Saturday morning, I <strong>am going to go</strong> to the market to buy fruit. In the afternoon, I <strong>am going to read</strong> a new detective novel in the garden. In the evening, I <strong>am going to have dinner</strong> with my family at the Italian restaurant.\"", es: "\"¡Hola! Soy Marc. El sábado por la mañana, <strong>voy a ir</strong> al mercado a comprar fruta. Por la tarde, <strong>voy a leer</strong> una nueva novela policíaca en el jardín. Por la noche, <strong>voy a cenar</strong> con mi familia en el restaurante italiano.\"", ja: "「こんにちは！マークです。土曜の朝、果物を買いに市場へ<strong>行きます</strong>。午後は、庭で新しい探偵小説を<strong>読みます</strong>。夜は、家族とイタリアンレストランで夕食を<strong>とります</strong>。」", zh: "“你好！我是马克。周六早上，我<strong>要去</strong>市场买水果。下午，我<strong>要</strong>在花园里读一本新的侦探小说。晚上，我<strong>要</strong>和家人在意大利餐厅吃晚饭。”", ko: "\"안녕하세요! 마크입니다. 토요일 아침에는 과일을 사러 시장에 <strong>갈 거예요</strong>. 오후에는 정원에서 새 탐정 소설을 <strong>읽을 거예요</strong>. 저녁에는 가족과 함께 이탈리아 식당에서 저녁을 <strong>먹을 거예요</strong>.\""}
            },
            { 
                questions: [
                    { fr: "Que va faire Sophie demain ?", en: "What is Sophie going to do tomorrow?", es: "¿Qué va a hacer Sophie mañana?", ja: "ソフィーは明日何をしますか？", zh: "苏菲明天要做什么？", ko: "소피는 내일 무엇을 할 건가요?" },
                    { fr: "Pourquoi va-t-elle à la bibliothèque ?", en: "Why is she going to the library?", es: "¿Por qué va a la biblioteca?", ja: "なぜ彼女は図書館へ行くのですか？", zh: "她为什么要去图书馆？", ko: "그녀는 왜 도서관에 가나요?" },
                    { fr: "Qu'est-ce qu'elle <strong>va préparer</strong> pour ses amis ?", en: "What is she <strong>going to prepare</strong> for her friends?", es: "¿Qué <strong>va a preparar</strong> para sus amigos?", ja: "彼女は友達のために何を<strong>準備するつもり</strong>ですか？", zh: "她<strong>打算</strong>为朋友们<strong>准备什么</strong>？", ko: "그녀는 친구들을 위해 무엇을 <strong>준비할 거예요</strong>?" }
                ],
                text: { fr: "\"Salut, c'est Sophie. Demain, je <strong>vais avoir</strong> une journée chargée. D'abord, je <strong>vais aller</strong> à la bibliothèque pour emprunter des livres pour mon cours de français. Ensuite, l'après-midi, je <strong>vais préparer</strong> un petit goûter parce que mes amis <strong>vont venir</strong> chez moi.\"", en: "\"Hi, it's Sophie. Tomorrow, I <strong>am going to have</strong> a busy day. First, I <strong>am going to go</strong> to the library to borrow books for my French class. Then, in the afternoon, I <strong>am going to prepare</strong> a small snack because my friends <strong>are going to come</strong> to my place.\"", es: "\"Hola, soy Sophie. Mañana, <strong>voy a tener</strong> un día ocupado. Primero, <strong>voy a ir</strong> a la biblioteca a pedir prestados libros para mi clase de francés. Luego, por la tarde, <strong>voy a preparar</strong> una pequeña merienda porque mis amigos <strong>van a venir</strong> a mi casa.\"", ja: "「こんにちは、ソフィーです。明日、私は忙しい一日を<strong>過ごします</strong>。まず、フランス語の授業のために図書館へ本を借りに<strong>行きます</strong>。それから、午後は、友達が家に来るので、小さなおやつを<strong>準備します</strong>。」", zh: "“嗨，我是苏菲。明天，我<strong>会度过</strong>忙碌的一天。首先，我<strong>要去</strong>图书馆为我的法语课借书。然后，下午，我<strong>要准备</strong>一些小点心，因为我的朋友们<strong>要来</strong>我家。”", ko: "\"안녕, 소피야. 내일 나는 바쁜 하루를 <strong>보낼 거야</strong>. 먼저, 프랑스어 수업을 위해 도서관에 책을 빌리러 <strong>갈 거야</strong>. 그런 다음 오후에는 친구들이 우리 집에 <strong>올 거라서</strong> 작은 간식을 <strong>준비할 거야</strong>.\"" }
            },
            { 
                questions: [
                    { fr: "Qu'est-ce que Thomas et Chloé <strong>vont faire</strong> ce week-end ?", en: "What are Thomas and Chloé <strong>going to do</strong> this weekend?", es: "¿Qué <strong>van a hacer</strong> Thomas y Chloé este fin de semana?", ja: "トーマスとクロエは今週末何を<strong>するつもり</strong>ですか？", zh: "托马斯和克洛伊这个周末<strong>打算做什么</strong>？", ko: "토마스와 클로에는 이번 주말에 무엇을 <strong>할 거예요</strong>?" },
                    { fr: "Où <strong>vont-ils regarder</strong> le match ?", en: "Where <strong>are they going to watch</strong> the match?", es: "¿Dónde <strong>van a ver</strong> el partido?", ja: "彼らはどこで試合を<strong>見るつもり</strong>ですか？", zh: "他们<strong>打算</strong>在哪里<strong>看</strong>比赛？", ko: "그들은 어디서 경기를 <strong>볼 거예요</strong>?" },
                    { fr: "Qu'est-ce qu'ils <strong>vont manger</strong> ?", en: "What <strong>are they going to eat</strong>?", es: "¿Qué <strong>van a comer</strong>?", ja: "彼らは何を<strong>食べるつもり</strong>ですか？", zh: "他们<strong>打算吃什么</strong>？", ko: "그들은 무엇을 <strong>먹을 거예요</strong>?" }
                ],
                text: { fr: "\"Bonjour ! Thomas ici. Ce week-end, Chloé et moi, nous <strong>allons regarder</strong> le match de foot. Nous <strong>allons aller</strong> chez notre ami Paul. Il a une grande télévision. Après le match, nous <strong>allons commander</strong> des pizzas et nous <strong>allons boire</strong> du soda.\"", en: "\"Hello! Thomas here. This weekend, Chloé and I, we <strong>are going to watch</strong> the football match. We <strong>are going to go</strong> to our friend Paul's house. He has a big television. After the match, we <strong>are going to order</strong> pizzas and we <strong>are going to drink</strong> soda.\"", es: "\"¡Hola! Thomas aquí. Este fin de semana, Chloé y yo, <strong>vamos a ver</strong> el partido de fútbol. <strong>Vamos a ir</strong> a casa de nuestro amigo Paul. Tiene una televisión grande. Después del partido, <strong>vamos a pedir</strong> pizzas y <strong>vamos a beber</strong> refresco.\"", ja: "「こんにちは！トーマスです。今週末、クロエと私はサッカーの試合を<strong>見ます</strong>。友達のポールの家へ<strong>行きます</strong>。彼は大きなテレビを持っています。試合の後、ピザを<strong>注文して</strong>、ソーダを<strong>飲みます</strong>。」", zh: "“你好！我是托马斯。这个周末，克洛伊和我，我们<strong>要看</strong>足球比赛。我们<strong>要去</strong>我们的朋友保罗家。他有一台大电视。比赛结束后，我们<strong>要点</strong>披萨，我们<strong>要喝</strong>苏打水。”", ko: "\"안녕하세요! 토마스입니다. 이번 주말에 클로에와 저는 축구 경기를 <strong>볼 거예요</strong>. 우리 친구 폴의 집에 <strong>갈 거예요</strong>. 그는 큰 텔레비전이 있어요. 경기 후에 우리는 피자를 <strong>주문하고</strong> 소다를 <strong>마실 거예요</strong>.\"" }
            }
        ]
    },
     reading1: {
        title: { fr: "7. Lecture 1: Un dialogue", en: "7. Reading 1: A dialogue", es: "7. Lectura 1: Un diálogo", ja: "7. 読解1：対話", zh: "7. 阅读1：对话", ko: "7. 읽기 1: 대화" },
        intro: { fr: "Lisez ce dialogue et répondez aux questions.", en: "Read this dialogue and answer the questions.", es: "Lee este diálogo y responde a las preguntas.", ja: "この対話を読んで質問に答えてください。", zh: "阅读此对话并回答问题。", ko: "이 대화를 읽고 질문에 답하세요." },
        dialogue: {
            annaName: {fr: "Anna", en: "Anna", es: "Ana", ja: "アンナ", zh: "安娜", ko: "안나"},
            leoName: {fr: "Léo", en: "Léo", es: "Leo", ja: "レオ", zh: "莱奥", ko: "레오"},
            anna1: { fr: "Salut Léo ! Qu'est-ce que tu <strong>vas faire</strong> ce soir ?", en: "Hi Léo! What are you <strong>going to do</strong> tonight?", es: "¡Hola Léo! ¿Qué <strong>vas a hacer</strong> esta noche?", ja: "レオ、こんにちは！今夜何を<strong>するつもり</strong>ですか？", zh: "嗨，莱奥！你今晚<strong>打算做什么</strong>？", ko: "레오 안녕! 오늘 밤에 뭐 <strong>할 거야</strong>?" },
            leo1: { fr: "Salut Anna ! Je <strong>vais regarder</strong> un nouveau film à la maison. Et toi ?", en: "Hi Anna! I'm <strong>going to watch</strong> a new movie at home. And you?", es: "¡Hola Anna! <strong>Voy a ver</strong> una película nueva en casa. ¿Y tú?", ja: "アンナ、こんにちは！家で新しい映画を<strong>見るつもり</strong>です。あなたは？", zh: "嗨，安娜！我<strong>打算</strong>在家看一部新电影。你呢？", ko: "안나 안녕! 나는 집에서 새 영화를 <strong>볼 거야</strong>. 너는?" },
            anna2: { fr: "Moi, je <strong>vais aller</strong> au restaurant avec mes parents. On <strong>va manger</strong> des pizzas.", en: "Me, I'm <strong>going to go</strong> to the restaurant with my parents. We're <strong>going to eat</strong> pizzas.", es: "Yo, <strong>voy a ir</strong> al restaurante con mis padres. <strong>Vamos a comer</strong> pizzas.", ja: "私は両親とレストランへ<strong>行きます</strong>。ピザを<strong>食べます</strong>。", zh: "我，我<strong>要去</strong>和父母一起去餐馆。我们<strong>要吃</strong>披萨。", ko: "나는 부모님이랑 식당에 <strong>갈 거야</strong>. 우리는 피자를 <strong>먹을 거야</strong>." },
            leo2: { fr: "Super ! Tu <strong>vas aimer</strong>. Le film que je <strong>vais regarder</strong> est une comédie.", en: "Great! You're <strong>going to like</strong> it. The movie I'm <strong>going to watch</strong> is a comedy.", es: "¡Genial! Te <strong>va a gustar</strong>. La película que <strong>voy a ver</strong> es una comedia.", ja: "すごい！きっと<strong>気に入る</strong>でしょう。私が見る映画はコメディです。", zh: "太棒了！你<strong>会喜欢</strong>的。我<strong>要看</strong>的电影是喜剧片。", ko: "좋아! 너도 <strong>좋아할 거야</strong>. 내가 <strong>볼</strong> 영화는 코미디야." },
            anna3: { fr: "Amuse-toi bien !", en: "Have fun!", es: "¡Diviértete!", ja: "楽しんで！", zh: "玩得开心！", ko: "재미있게 보내!" },
            leo3: { fr: "Toi aussi !", en: "You too!", es: "¡Tú también!", ja: "あなたも！", zh: "你也是！", ko: "너도!" }
        },
        comprehensionQ1Text: { fr: "Que va faire Léo ce soir ?", en: "What is Léo going to do tonight?", es: "¿Qué va a hacer Léo esta noche?", ja: "レオは今夜何をしますか？", zh: "莱奥今晚要做什么？", ko: "레오는 오늘 밤 무엇을 할 예정인가요?" },
        comprehensionQ2Text: { fr: "Où va Anna ce soir ?", en: "Where is Anna going tonight?", es: "¿A dónde va Anna esta noche?", ja: "アンナは今夜どこへ行きますか？", zh: "安娜今晚要去哪里？", ko: "안나는 오늘 밤 어디로 가나요?" },
        comprehensionQ3Text: { fr: "Que vont manger Anna et ses parents ?", en: "What are Anna and her parents going to eat?", es: "¿Qué van a comer Anna y sus padres?", ja: "アンナと彼女の両親は何を食べますか？", zh: "安娜和她的父母要吃什么？", ko: "안나와 그녀의 부모님은 무엇을 먹을 건가요?" }
    },
    reading2: {
        title: { fr: "8. Lecture 2: Un article intéressant", en: "8. Reading 2: An interesting article", es: "8. Lectura 2: Un artículo interesante", ja: "8. 読解2：興味深い記事", zh: "8. 阅读2：一篇有趣的文章", ko: "8. 읽기 2: 흥미로운 기사" },
        intro: { fr: "Lisez cet article et répondez aux questions.", en: "Read this article and answer the questions.", es: "Lee este artículo y responde a las preguntas.", ja: "この記事を読んで質問に答えてください。", zh: "阅读这篇文章并回答问题。", ko: "이 기사를 읽고 질문에 답하세요." },
        articleTitle: { fr: "Un week-end écologique : Que vas-tu faire pour la planète ?", en: "An ecological weekend: What are you going to do for the planet?", es: "Un fin de semana ecológico: ¿Qué vas a hacer por el planeta?", ja: "エコな週末：地球のために何をしますか？", zh: "环保周末：你将为地球做些什么？", ko: "환경 친화적인 주말: 지구를 위해 무엇을 할 건가요?" },
        articleContent: { fr: "Ce week-end, beaucoup de personnes <strong>vont participer</strong> à des actions écologiques. Par exemple, certains <strong>vont nettoyer</strong> une plage. D'autres <strong>vont planter</strong> des arbres dans un parc. Toi aussi, tu peux faire des petits gestes : tu <strong>vas trier</strong> tes déchets, tu <strong>vas utiliser</strong> moins d'eau, ou tu <strong>vas aller</strong> faire tes courses à vélo. Chaque action est importante pour notre futur !", en: "This weekend, many people <strong>are going to participate</strong> in ecological actions. For example, some <strong>are going to clean</strong> a beach. Others <strong>are going to plant</strong> trees in a park. You too can make small gestures: you <strong>are going to sort</strong> your waste, you <strong>are going to use</strong> less water, or you <strong>are going to go</strong> shopping by bike. Every action is important for our future!", es: "Este fin de semana, muchas personas <strong>van a participar</strong> en acciones ecológicas. Por ejemplo, algunos <strong>van a limpiar</strong> una playa. Otros <strong>van a plantar</strong> árboles en un parque. Tú también puedes hacer pequeños gestos: <strong>vas a clasificar</strong> tus residuos, <strong>vas a usar</strong> menos agua, o <strong>vas a ir</strong> de compras en bicicleta. ¡Cada acción es importante para nuestro futuro!", ja: "今週末、多くの人々が環境活動に<strong>参加します</strong>。例えば、ビーチを<strong>掃除する</strong>人もいれば、公園に木を<strong>植える</strong>人もいます。あなたも小さな行動を起こすことができます：ゴミを<strong>分別する</strong>、水をあまり<strong>使わない</strong>、自転車で買い物に<strong>行く</strong>など。すべての行動が私たちの未来にとって重要です！", zh: "这个周末，许多人将<strong>参加</strong>环保行动。例如，一些人将<strong>清理</strong>海滩。另一些人将在公园里<strong>植树</strong>。你也可以做些小事：你将<strong>分类</strong>垃圾，你将<strong>少用</strong>水，或者你将骑自行车去购物。每一个行动对我们的未来都很重要！", ko: "이번 주말에는 많은 사람들이 환경 보호 활동에 <strong>참여할 거예요</strong>. 예를 들어, 어떤 사람들은 해변을 <strong>청소할 거고</strong>, 다른 사람들은 공원에 나무를 <strong>심을 거예요</strong>. 여러분도 작은 행동을 할 수 있어요: 쓰레기를 <strong>분리수거하고</strong>, 물을 <strong>덜 사용하고</strong>, 자전거로 쇼핑을 <strong>갈 수 있어요</strong>. 모든 행동이 우리 미래에 중요해요!" },
        comprehensionQ1Text: { fr: "De quoi parle principalement l'article ?", en: "What is the article mainly about?", es: "¿De qué trata principalmente el artículo?", ja: "この記事は主に何について話していますか？", zh: "这篇文章主要讲的是什么？", ko: "이 기사는 주로 무엇에 관한 것인가요?" },
        comprehensionQ2Text: { fr: "Quelle action N'EST PAS mentionnée comme un geste écologique ?", en: "Which action is NOT mentioned as an ecological gesture?", es: "¿Qué acción NO se menciona como un gesto ecológico?", ja: "環境に優しい行動として言及されていないのはどれですか？", zh: "哪项行动没有被提及为环保举措？", ko: "생태학적 행동으로 언급되지 않은 것은 무엇인가요?" },
        comprehensionQ3Text: { fr: "Selon l'article, pourquoi ces actions sont-elles importantes ?", en: "According to the article, why are these actions important?", es: "Según el artículo, ¿por qué son importantes estas acciones?", ja: "記事によると、なぜこれらの行動は重要なのですか？", zh: "根据文章，为什么这些行动很重要？", ko: "기사에 따르면, 이러한 행동이 중요한 이유는 무엇인가요?" }
    },
    shortActivities: {
        title: { fr: "9. Petites Activités Créatives", en: "9. Creative Short Activities", es: "9. Pequeñas Actividades Creativas", ja: "9. クリエイティブな短いアクティビティ", zh: "9.创意小活动", ko: "9. 창의적인 짧은 활동" },
        gameTitle: { fr: "Jeu: Tic-Tac-Futur", en: "Game: Tic-Tac-Future", es: "Juego: Tic-Tac-Futuro", ja: "ゲーム：三目並べフューチャー", zh: "游戏：井字棋未来时", ko: "게임: 틱택토 미래" },
        gameIntro: { fr: "<p><strong>Comment jouer :</strong> Dessinez une grille de Tic-Tac-Toe (Morpion). Dans chaque case, écrivez un verbe à l'infinitif (ex: manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir).</p><p>Pour marquer une case (X ou O), vous devez faire une phrase correcte au futur proche avec le verbe de cette case. Par exemple, si la case contient \"manger\", vous pouvez dire: \"Ce soir, je vais manger des pâtes.\"</p><p>Le premier joueur à aligner trois de ses marques gagne !</p>", en: "<p><strong>How to play:</strong> Draw a Tic-Tac-Toe grid. In each square, write an infinitive verb (e.g., manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir).</p><p>To mark a square (X or O), you must make a correct sentence in the near future with the verb in that square. For example, if the square contains \"manger\", you can say: \"Ce soir, je vais manger des pâtes.\"</p><p>The first player to line up three of their marks wins!</p>", es: "<p><strong>Cómo jugar:</strong> Dibuja una cuadrícula de Tic-Tac-Toe (Tres en raya). En cada casilla, escribe un verbo en infinitivo (ej: manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir).</p><p>Para marcar una casilla (X u O), debes hacer una frase correcta en futuro próximo con el verbo de esa casilla. Por ejemplo, si la casilla contiene \"manger\", puedes decir: \"Ce soir, je vais manger des pâtes.\"</p><p>¡El primer jugador en alinear tres de sus marcas gana!</p>", ja: "<p><strong>遊び方：</strong>三目並べのマス目を描きます。各マスに不定詞の動詞（例：manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir）を書きます。</p><p>マスに印（XまたはO）を付けるには、そのマスの動詞を使って近接未来で正しい文を作る必要があります。例えば、マスに「manger」と書かれていれば、「Ce soir, je vais manger des pâtes.」と言うことができます。</p><p>最初に自分の印を3つ並べたプレイヤーの勝ちです！</p>", zh: "<p><strong>怎么玩：</strong>画一个井字棋（Morpion）的格子。在每个格子里写一个不定式动词（例如：manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir）。</p><p>要标记一个格子（X或O），你必须用该格子中的动词造一个正确的最近将来时句子。例如，如果格子里有“manger”，你可以说：“Ce soir, je vais manger des pâtes.”</p><p>第一个将自己的标记连成三个的玩家获胜！</p>", ko: "<p><strong>게임 방법:</strong> 틱택토(모르피옹) 격자를 그립니다. 각 칸에 부정사 동사(예: manger, jouer, lire, voyager, étudier, parler, finir, choisir, dormir)를 씁니다.</p><p>칸에 표시(X 또는 O)를 하려면 해당 칸의 동사를 사용하여 가까운 미래 시제로 올바른 문장을 만들어야 합니다. 예를 들어, 칸에 \"manger\"가 포함되어 있다면 \"Ce soir, je vais manger des pâtes.\"라고 말할 수 있습니다.</p><p>자신의 표시를 세 개 먼저 정렬하는 플레이어가 승리합니다!</p>" },
        roleplayTitle: { fr: "Jeu de Rôle: Organiser une sortie", en: "Role Play: Organizing an outing", es: "Juego de Roles: Organizar una salida", ja: "ロールプレイ：外出を計画する", zh: "角色扮演：组织一次郊游", ko: "역할극: 외출 계획하기" },
        roleplayIntro: { fr: "<p><strong>Instructions :</strong> Travaillez avec un partenaire.</p><p><strong>Étudiant A :</strong> Tu veux organiser une sortie pour le week-end. Propose quelque chose à l'Étudiant B. Utilise le futur proche.</p><p><em>Exemple A : \"Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?\"</em></p><p><strong>Étudiant B :</strong> Réponds à l'Étudiant A. Dis ce que tu <strong>vas faire</strong> ou propose une alternative. Utilise le futur proche.</p><p><em>Exemple B : \"Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?\"</em></p>", en: "<p><strong>Instructions:</strong> Work with a partner.</p><p><strong>Student A:</strong> You want to organize an outing for the weekend. Suggest something to Student B. Use the near future.</p><p><em>Example A: \"Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?\"</em></p><p><strong>Student B:</strong> Answer Student A. Say what you <strong>are going to do</strong> or suggest an alternative. Use the near future.</p><p><em>Example B: \"Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?\"</em></p>", es: "<p><strong>Instrucciones:</strong> Trabaja con un compañero.</p><p><strong>Estudiante A:</strong> Quieres organizar una salida para el fin de semana. Sugiérele algo al Estudiante B. Usa el futuro próximo.</p><p><em>Ejemplo A: \"Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?\"</em></p><p><strong>Estudiante B:</strong> Responde al Estudiante A. Di lo que <strong>vas a hacer</strong> o sugiere una alternativa. Usa el futuro próximo.</p><p><em>Ejemplo B: \"Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?\"</em></p>", ja: "<p><strong>指示：</strong>パートナーと協力してください。</p><p><strong>学生A：</strong>週末の外出を計画したいです。学生Bに何か提案してください。近接未来を使ってください。</p><p><em>例A：「Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?」</em></p><p><strong>学生B：</strong>学生Aに答えてください。何を<strong>するつもり</strong>か、または代替案を提案してください。近接未来を使ってください。</p><p><em>例B：「Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?」</em></p>", zh: "<p><strong>说明：</strong>与伙伴一起工作。</p><p><strong>学生A：</strong>你想为周末组织一次郊游。向学生B建议一些事情。使用最近将来时。</p><p><em>例A：“Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?”</em></p><p><strong>学生B：</strong>回答学生A。说出你<strong>打算做什么</strong>或提出替代方案。使用最近将来时。</p><p><em>例B：“Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?”</em></p>", ko: "<p><strong>지침:</strong> 파트너와 함께 작업하세요.</p><p><strong>학생 A:</strong> 주말 외출을 계획하고 싶습니다. 학생 B에게 무언가를 제안하세요. 가까운 미래 시제를 사용하세요.</p><p><em>예시 A: \"Salut ! Qu'est-ce que tu <strong>vas faire</strong> samedi ? Ça te dit d'aller au cinéma ?\"</em></p><p><strong>학생 B:</strong> 학생 A에게 답하세요. 무엇을 <strong>할 것인지</strong> 말하거나 대안을 제안하세요. 가까운 미래 시제를 사용하세요.</p><p><em>예시 B: \"Salut ! Samedi, je <strong>vais visiter</strong> mes grands-parents. Mais dimanche, je <strong>vais être</strong> libre. On peut peut-être aller au parc ?\"</em></p>" }
    },
    conclusion: {
        title: { fr: "10. Conclusion et Prochainement", en: "10. Conclusion and Next Steps", es: "10. Conclusión y Próximamente", ja: "10. まとめと次回予告", zh: "10. 总结与展望", ko: "10. 결론 및 다음 단계" },
        reflectionTitle: { fr: "Réflexion", en: "Reflection", es: "Reflexión", ja: "振り返り", zh: "反思", ko: "성찰" },
        reflectionQ1: { fr: "Qu'as-tu appris aujourd'hui sur le futur proche ?", en: "What did you learn today about the near future?", es: "¿Qué aprendiste hoy sobre el futuro próximo?", ja: "今日、近接未来について何を学びましたか？", zh: "今天你学到了关于最近将来时的什么？", ko: "오늘 가까운 미래 시제에 대해 무엇을 배웠나요?" },
        reflectionQ2: { fr: "Quelles activités <strong>vas-tu faire</strong> en utilisant le futur proche cette semaine ? (Pense à 2-3 choses)", en: "What activities are you <strong>going to do</strong> using the near future this week? (Think of 2-3 things)", es: "¿Qué actividades <strong>vas a hacer</strong> usando el futuro próximo esta semana? (Piensa en 2-3 cosas)", ja: "今週、近接未来を使ってどんな活動を<strong>するつもり</strong>ですか？（2〜3つ考えてみてください）", zh: "这周你<strong>打算</strong>用最近将来时做哪些活动？（想2-3件事）", ko: "이번 주에 가까운 미래 시제를 사용하여 어떤 활동을 <strong>할 거예요</strong>? (2-3가지 생각해보세요)" },
        nextLessonTitle: { fr: "Aperçu de la prochaine leçon", en: "Preview of the next lesson", es: "Avance de la próxima lección", ja: "次回のレッスンのプレビュー", zh: "下节课预告", ko: "다음 수업 미리보기" },
        nextLessonText: { fr: "Bravo pour ton travail aujourd'hui ! La prochaine fois, nous allons explorer une autre façon de parler du futur : <strong>le futur simple</strong>. Nous verrons quand l'utiliser et comment le former.", en: "Great job today! Next time, we will explore another way to talk about the future: <strong>the simple future</strong>. We will see when to use it and how to form it.", es: "¡Gran trabajo hoy! La próxima vez, exploraremos otra forma de hablar sobre el futuro: <strong>el futuro simple</strong>. Veremos cuándo usarlo y cómo formarlo.", ja: "今日の作業、お疲れ様でした！次回は、未来について話す別の方法、<strong>単純未来</strong>を探求します。いつ使うか、どのように形成するかを見ていきます。", zh: "今天做得很好！下次，我们将探索另一种谈论未来的方式：<strong>简单将来时</strong>。我们将了解何时使用它以及如何构成它。", ko: "오늘 정말 잘했어요! 다음 시간에는 미래에 대해 이야기하는 또 다른 방법인 <strong>단순 미래 시제</strong>를 살펴볼 거예요. 언제 사용하고 어떻게 만드는지 알아볼게요." },
        goodbye: { fr: "À bientôt !", en: "See you soon!", es: "¡Hasta pronto!", ja: "またね！", zh: "再见！", ko: "곧 만나요!" }
    }
};

// --- UTILITY FUNCTIONS ---
function setPlaceholderImage(imgElement, text, type = 'vocab', customColor = null) {
    let width, height, bgColor, textColor = 'ffffff', fontSize = 20;
    const placeholderBaseUrl = 'https://placehold.co';
    if (type === 'vocab') {
        width = 200; height = 100;
        bgColor = customColor || placeholderColors[Math.floor(Math.random() * placeholderColors.length)];
        if (text.length > 10 || (currentLang === 'ja' || currentLang === 'zh' || currentLang === 'ko') && text.length > 5) fontSize = 16;
        if (text.length > 15 || (currentLang === 'ja' || currentLang === 'zh' || currentLang === 'ko') && text.length > 8) fontSize = 14;
        imgElement.src = `${placeholderBaseUrl}/${width}x${height}/${bgColor}/${textColor}?text=${encodeURIComponent(text)}&font=Inter&fontsize=${fontSize}`;
        imgElement.alt = text;
    } else if (type === 'decorative-header') {
        width = 800; height = 200; bgColor = customColor || '63b3ed'; fontSize = 40;
        imgElement.src = `${placeholderBaseUrl}/${width}x${height}/${bgColor}/${textColor}?text=${encodeURIComponent(text)}&font=Inter&fontsize=${fontSize}`;
        imgElement.alt = text;
    } else {
        width = 600; height = 150; bgColor = customColor || 'a0aec0'; fontSize = 30;
        imgElement.src = `${placeholderBaseUrl}/${width}x${height}/${bgColor}/${textColor}?text=${encodeURIComponent(text)}&font=Inter&fontsize=${fontSize}`;
        imgElement.alt = text;
    }
    const loadingPlaceholder = imgElement.previousElementSibling;
    if (loadingPlaceholder && loadingPlaceholder.classList.contains('img-loading-placeholder')) {
         loadingPlaceholder.style.display = 'none';
    }
    imgElement.style.display = 'block';
}

function getTranslation(key, lang, index = null) {
    const keys = key.split('.');
    let currentObj = translations;
    for (const k of keys) {
        if (Array.isArray(currentObj) && index !== null && currentObj[index] && currentObj[index][k]) {
            currentObj = currentObj[index][k];
        } else if (currentObj[k]) {
            currentObj = currentObj[k];
        } else {
            return `[${key}]`; 
        }
    }
    if (typeof currentObj === 'object' && currentObj !== null && currentObj[lang] !== undefined) {
        return currentObj[lang];
    } else if (typeof currentObj === 'object' && currentObj !== null && currentObj.fr !== undefined) {
        return currentObj.fr; 
    }
    return `[${key}.${lang}]`; 
}

function updatePageLanguage(langCode) {
    currentLang = langCode;
    document.querySelectorAll('[data-translate-key]').forEach(el => {
        const key = el.dataset.translateKey;
        el.innerHTML = getTranslation(key, langCode); 
    });
    document.getElementById('page-title').textContent = getTranslation('pageTitle', langCode);

    document.querySelectorAll('.lang-button-group .lang-button').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === langCode) {
            btn.classList.add('active');
        }
    });
    
    const toggleViewModeBtn = document.getElementById('toggle-view-mode');
    if (toggleViewModeBtn) {
        toggleViewModeBtn.innerHTML = isPaginatedViewActive ? getTranslation('pagination.toggleScrollView', currentLang) : getTranslation('pagination.togglePaginatedView', currentLang);
    }

    renderVocabularyDisplay(langCode);
    renderVocabActivity1Display(langCode);
    renderVocabActivity2(langCode, !isPaginatedViewActive); 
    renderCurrentFlashcard(langCode); 
    renderMcqQuestions(reading1QuestionsData, reading1QuestionsContainer, 'reading1.comprehensionQ', langCode);
    renderMcqQuestions(reading2QuestionsData, reading2QuestionsContainer, 'reading2.comprehensionQ', langCode);
    updateSectionVisibility(); 
}

// --- RENDER FUNCTIONS FOR DYNAMIC CONTENT ---
const vocabGridContainer = document.getElementById('vocab-grid-container');
function renderVocabularyDisplay(langCode) {
    vocabGridContainer.innerHTML = '';
    vocabulary.forEach(item => {
        const vocabDiv = document.createElement('div');
        vocabDiv.className = 'vocab-item';
        const placeholderDiv = document.createElement('div');
        placeholderDiv.className = 'img-loading-placeholder';
        placeholderDiv.innerHTML = `<i class="fas fa-hourglass-half fa-2x"></i>`; 
        const img = document.createElement('img');
        img.style.display = 'none'; 
        vocabDiv.appendChild(placeholderDiv); vocabDiv.appendChild(img);
        const p = document.createElement('p');
        p.className = 'vocab-term-display'; p.textContent = item.fr; 
        vocabDiv.appendChild(p);
        vocabGridContainer.appendChild(vocabDiv);
        setPlaceholderImage(img, item[langCode] || item.fr, 'vocab', item.color);
    });
}

const vocabActivity1Grid = document.getElementById('vocab-activity1-grid');
const vocabActivity1WordbankText = document.getElementById('vocab-activity1-wordbank-text');
const wordbankLangIndicator = document.getElementById('wordbank-lang-indicator');
let shuffledVocabForActivity1 = [];
function renderVocabActivity1Display(langCode) {
    if (shuffledVocabForActivity1.length === 0) {
        shuffledVocabForActivity1 = [...vocabulary].sort(() => 0.5 - Math.random());
    }
    vocabActivity1Grid.innerHTML = '';
    const currentLangName = languages.find(l => l.code === langCode)?.name || 'Français';
    wordbankLangIndicator.textContent = currentLangName;
    vocabActivity1WordbankText.textContent = shuffledVocabForActivity1.map(v => v[langCode] || v.fr).join('  |  ');
    shuffledVocabForActivity1.forEach((item) => {
        const activityItemDiv = document.createElement('div');
        activityItemDiv.className = 'vocab-item';
        const placeholderDiv = document.createElement('div');
        placeholderDiv.className = 'img-loading-placeholder';
        placeholderDiv.innerHTML = `<i class="fas fa-hourglass-half fa-2x"></i>`;
        const img = document.createElement('img');
        img.alt = `Image pour ${item.fr}`; img.style.display = 'none';
        activityItemDiv.appendChild(placeholderDiv); activityItemDiv.appendChild(img);
        const input = document.createElement('input');
        input.type = 'text'; input.className = 'activity-input';
        input.dataset.correctAnswer = item.fr; input.placeholder = 'Écris en français';
        const feedbackDiv = document.createElement('div');
        feedbackDiv.className = 'feedback';
        activityItemDiv.appendChild(input); activityItemDiv.appendChild(feedbackDiv);
        vocabActivity1Grid.appendChild(activityItemDiv);
        setPlaceholderImage(img, item[langCode] || item.fr, 'vocab', item.color);
    });
}

const vocabActivity2SentencesContainer = document.getElementById('vocab-activity2-sentences');
const vocabActivity2PaginationContainer = document.getElementById('vocab-activity2-pagination');

function renderVocabActivity2(langCode, forceFullRender = false) {
    vocabActivity2SentencesContainer.innerHTML = '';
    vocabActivity2PaginationContainer.innerHTML = ''; 

    const totalItems = vocabulary.length;
    let itemsToRender = vocabulary;

    if (isPaginatedViewActive && !forceFullRender && document.getElementById('vocab-activite-2').classList.contains('active-section')) {
        const startIndex = currentVocabActivity2Page * vocabActivity2ItemsPerPage;
        const endIndex = startIndex + vocabActivity2ItemsPerPage;
        itemsToRender = vocabulary.slice(startIndex, endIndex);

        if (totalItems > vocabActivity2ItemsPerPage) {
            const totalPages = Math.ceil(totalItems / vocabActivity2ItemsPerPage);
            const prevButton = document.createElement('button');
            prevButton.innerHTML = `&lt; ${getTranslation('pagination.prevPage', langCode)}`;
            prevButton.className = 'button button-secondary mr-2';
            prevButton.disabled = currentVocabActivity2Page === 0;
            prevButton.addEventListener('click', () => {
                if (currentVocabActivity2Page > 0) {
                    currentVocabActivity2Page--;
                    renderVocabActivity2(currentLang);
                }
            });
            const pageIndicator = document.createElement('span');
            pageIndicator.className = 'text-slate-600 mx-2';
            pageIndicator.textContent = getTranslation('pagination.pageIndicator', langCode)
                                            .replace('{current}', currentVocabActivity2Page + 1)
                                            .replace('{total}', totalPages);
            const nextButton = document.createElement('button');
            nextButton.innerHTML = `${getTranslation('pagination.nextPage', langCode)} &gt;`;
            nextButton.className = 'button button-secondary ml-2';
            nextButton.disabled = currentVocabActivity2Page >= totalPages - 1;
            nextButton.addEventListener('click', () => {
                if (currentVocabActivity2Page < totalPages - 1) {
                    currentVocabActivity2Page++;
                    renderVocabActivity2(currentLang);
                }
            });
            vocabActivity2PaginationContainer.appendChild(prevButton);
            vocabActivity2PaginationContainer.appendChild(pageIndicator);
            vocabActivity2PaginationContainer.appendChild(nextButton);
        }
    } else {
        // If not in paginated view OR not the active section OR forcing full render, reset its internal page
        if (!document.getElementById('vocab-activite-2').classList.contains('active-section') || forceFullRender) {
           currentVocabActivity2Page = 0; 
        }
    }

    itemsToRender.forEach((item, indexInPage) => {
        const originalIndex = (isPaginatedViewActive && !forceFullRender && document.getElementById('vocab-activite-2').classList.contains('active-section')) 
                            ? (currentVocabActivity2Page * vocabActivity2ItemsPerPage) + indexInPage 
                            : vocabulary.indexOf(item); // Use actual index from full list if not paginating internally
        const sentenceParts = item.sentenceParts[langCode] || item.sentenceParts.fr;
        const sentenceContainer = document.createElement('div');
        sentenceContainer.className = 'sentence-container';
        const label = document.createElement('label');
        label.htmlFor = `vocab2-q${originalIndex}`;
        label.className = 'block text-sm font-medium text-gray-700 mb-1 md:mb-0'; 
        label.innerHTML = `${originalIndex + 1}. ${sentenceParts.start} <input type="text" id="vocab2-q${originalIndex}" class="activity-input inline-block w-auto" data-correct-answer-fr="${item.fr}" placeholder="vais ${item.fr.split(' ')[0]}..."> ${sentenceParts.end}`;
        const checkButton = document.createElement('button');
        checkButton.className = 'button button-check-single';
        checkButton.innerHTML = getTranslation('vocabActivity2.checkAnswerBtn', langCode);
        checkButton.type = 'button'; 
        checkButton.addEventListener('click', () => {
            const inputField = document.getElementById(`vocab2-q${originalIndex}`);
            const feedbackDiv = sentenceContainer.querySelector('.feedback'); 
            const inputValue = inputField.value.trim().toLowerCase();
            const frenchVocabPhrase = inputField.dataset.correctAnswerFr.toLowerCase();
            const futurProcheVerbs = ["vais", "vas", "va", "allons", "allez", "vont"];
            let isCorrect = false;
            if (futurProcheVerbs.some(verb => inputValue.startsWith(verb + " ") && inputValue.endsWith(frenchVocabPhrase) && inputValue === (verb + " " + frenchVocabPhrase) )) {
                isCorrect = true;
            } else if (futurProcheVerbs.some(verb => inputValue.startsWith(verb + " ") && inputValue.includes(" " + frenchVocabPhrase))) {
                 const parts = inputValue.split(" ");
                 if (parts.length >= 2 && futurProcheVerbs.includes(parts[0]) && inputValue.substring(parts[0].length + 1) === frenchVocabPhrase) {
                    isCorrect = true;
                 }
            }
            if (isCorrect) {
                feedbackDiv.textContent = "Bien ! 👍"; feedbackDiv.className = 'feedback correct';
            } else {
                feedbackDiv.textContent = `Presque ! Utilise le futur proche en français. Ex: "vais ${inputField.dataset.correctAnswerFr}"`;
                feedbackDiv.className = 'feedback incorrect';
            }
        });
        const feedbackDiv = document.createElement('div');
        feedbackDiv.className = 'feedback w-full mt-1'; 
        sentenceContainer.appendChild(label);
        sentenceContainer.appendChild(checkButton);
        sentenceContainer.appendChild(feedbackDiv); 
        vocabActivity2SentencesContainer.appendChild(sentenceContainer);
    });
}

// --- Flashcard Logic ---
const flashcardElement = document.getElementById('listening-flashcard');
const flashcardFrontContent = document.getElementById('flashcard-front-content');
const flashcardBackContent = document.getElementById('flashcard-back-content');
const flashcardIndicator = document.getElementById('flashcard-indicator');
const prevFlashcardBtn = document.getElementById('prev-flashcard');
const nextFlashcardBtn = document.getElementById('next-flashcard');
const toggleQuestionsVisibilityBtn = document.getElementById('toggle-questions-visibility');
let questionsVisible = false;

function renderCurrentFlashcard(langCode) {
    const cardData = listeningFlashcardData[currentFlashcardIndex];
    const cardTranslations = translations.listeningPractice.flashcards[cardData.id];

    let frontHTML = `<h3 class="text-xl font-semibold mb-2">${getTranslation('listeningPractice.cardFrontTitle', langCode)}</h3>`;
    frontHTML += `<div id="listening-questions-list" class="${questionsVisible ? '' : 'hidden'}">`;
    frontHTML += '<ul class="list-decimal list-inside text-left text-base space-y-1">';
    cardTranslations.questions.forEach((qTrans, index) => {
        frontHTML += `<li>${qTrans[langCode] || qTrans.fr}</li>`;
    });
    frontHTML += '</ul></div>';
    frontHTML += `<p class="mt-3 text-sm">${getTranslation('listeningPractice.cardFrontInstruction', langCode)}</p>`;
    flashcardFrontContent.innerHTML = frontHTML;

    let backHTML = `<h3 class="text-lg font-semibold mb-2">${getTranslation('listeningPractice.cardBackTitle', langCode)}</h3>`;
    backHTML += `<p class="text-sm">${cardTranslations.text[langCode] || cardTranslations.text.fr}</p>`;
    flashcardBackContent.innerHTML = backHTML;

    const indicatorText = getTranslation('listeningPractice.cardIndicator', langCode)
                            .replace('{current}', currentFlashcardIndex + 1)
                            .replace('{total}', listeningFlashcardData.length);
    flashcardIndicator.textContent = indicatorText;

    prevFlashcardBtn.disabled = currentFlashcardIndex === 0;
    nextFlashcardBtn.disabled = currentFlashcardIndex === listeningFlashcardData.length - 1;

    flashcardElement.classList.remove('is-flipped');
}


function renderMcqQuestions(questionsArray, containerElement, translationKeyPrefix, langCode) {
    if (!containerElement) return;
    containerElement.innerHTML = '';
    questionsArray.forEach((qData, index) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'mb-4 p-3 border border-slate-200 rounded-lg';
        const questionText = getTranslation(`${translationKeyPrefix}${index + 1}Text`, langCode);
        qDiv.innerHTML = `<p class="font-semibold mb-2">${index + 1}. ${questionText}</p>`;
        const optionsDiv = document.createElement('div');
        qData.options.forEach(optText => { 
            const optButton = document.createElement('button');
            optButton.className = 'question-option';
            optButton.textContent = optText; 
            optButton.addEventListener('click', () => {
                optionsDiv.querySelectorAll('.question-option').forEach(btn => {
                    btn.disabled = true; btn.classList.remove('incorrect'); 
                });
                if (optText === qData.correctAnswer) optButton.classList.add('correct');
                else {
                    optButton.classList.add('incorrect');
                    optionsDiv.querySelectorAll('.question-option').forEach(btn => {
                        if (btn.textContent === qData.correctAnswer) btn.classList.add('correct');
                    });
                }
            });
            optionsDiv.appendChild(optButton);
        });
        qDiv.appendChild(optionsDiv);
        containerElement.appendChild(qDiv);
    });
}

// --- EVENT LISTENERS & INITIALIZATION ---
function createSectionLanguageSwitcher(containerId) {
    const buttonContainer = document.getElementById(containerId);
    if (!buttonContainer) return;
    buttonContainer.innerHTML = ''; 
    languages.forEach(lang => {
        const button = document.createElement('button');
        button.className = 'lang-button';
        button.textContent = lang.name;
        button.dataset.lang = lang.code;
        if (lang.code === currentLang) button.classList.add('active');
        button.addEventListener('click', () => updatePageLanguage(lang.code));
        buttonContainer.appendChild(button);
    });
}

document.getElementById('check-vocab1-button').addEventListener('click', () => {
    vocabActivity1Grid.querySelectorAll('input[type="text"]').forEach(input => {
        const feedbackDiv = input.nextElementSibling;
        if (input.value.trim().toLowerCase() === input.dataset.correctAnswer.toLowerCase()) {
            feedbackDiv.textContent = "Correct ! 👍"; feedbackDiv.className = 'feedback correct';
        } else {
            feedbackDiv.textContent = `Incorrect. La réponse française est : ${input.dataset.correctAnswer}`;
            feedbackDiv.className = 'feedback incorrect';
        }
    });
});

if (flashcardElement) {
    flashcardElement.addEventListener('click', () => flashcardElement.classList.toggle('is-flipped'));
}
if (toggleQuestionsVisibilityBtn) {
    toggleQuestionsVisibilityBtn.addEventListener('click', (e) => {
        e.stopPropagation(); 
        questionsVisible = !questionsVisible;
        const list = document.getElementById('listening-questions-list');
        if (list) list.classList.toggle('hidden', !questionsVisible);
        const icon = toggleQuestionsVisibilityBtn.querySelector('i');
        icon.classList.toggle('fa-eye', !questionsVisible);
        icon.classList.toggle('fa-eye-slash', questionsVisible);
    });
}
if (prevFlashcardBtn) {
    prevFlashcardBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (currentFlashcardIndex > 0) {
            currentFlashcardIndex--;
            questionsVisible = false; 
            renderCurrentFlashcard(currentLang);
        }
    });
}
if (nextFlashcardBtn) {
    nextFlashcardBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (currentFlashcardIndex < listeningFlashcardData.length - 1) {
            currentFlashcardIndex++;
            questionsVisible = false; 
            renderCurrentFlashcard(currentLang);
        }
    });
}

const reading1QuestionsContainer = document.getElementById('reading1-questions');
const reading2QuestionsContainer = document.getElementById('reading2-questions');
const reading1QuestionsData = [
    { options: ["Aller au restaurant", "Regarder un film à la maison", "Lire un livre"], correctAnswer: "Regarder un film à la maison" },
    { options: ["Au cinéma", "À la maison de Léo", "Au restaurant avec ses parents"], correctAnswer: "Au restaurant avec ses parents" },
    { options: ["Des pâtes", "Des pizzas", "Des hamburgers"], correctAnswer: "Des pizzas" }
];
const reading2QuestionsData = [
    { options: ["Des vacances à la montagne", "Des actions écologiques pour le week-end", "De la cuisine française"], correctAnswer: "Des actions écologiques pour le week-end" },
    { options: ["Planter des arbres", "Utiliser plus d'eau", "Trier ses déchets"], correctAnswer: "Utiliser plus d'eau" },
    { options: ["Pour gagner de l'argent", "Pour s'amuser", "Pour notre futur"], correctAnswer: "Pour notre futur" }
];

// --- Pagination Logic ---
const toggleViewModeBtn = document.getElementById('toggle-view-mode');
const globalPaginationControls = document.getElementById('global-pagination-controls');
const prevSectionBtn = document.getElementById('prev-section-btn');
const nextSectionBtn = document.getElementById('next-section-btn');
const globalSectionIndicator = document.getElementById('global-section-indicator');

function updateSectionVisibility() {
    if (isPaginatedViewActive) {
        document.body.classList.add('paginated-view');
        globalPaginationControls.style.display = 'flex';
        lessonSections.forEach((section, index) => {
            section.classList.toggle('active-section', index === currentSectionIndex);
            if (index === currentSectionIndex) {
                section.style.maxHeight = '75vh';
                section.style.overflowY = 'auto';
            } else {
                section.style.maxHeight = '';
                section.style.overflowY = '';
            }
        });
        prevSectionBtn.disabled = currentSectionIndex === 0;
        nextSectionBtn.disabled = currentSectionIndex === lessonSections.length - 1;
        globalSectionIndicator.textContent = `Section ${currentSectionIndex + 1} / ${lessonSections.length}`;
        renderVocabActivity2(currentLang); // Re-render with potential internal pagination
    } else {
        document.body.classList.remove('paginated-view');
        globalPaginationControls.style.display = 'none';
        lessonSections.forEach(section => {
            section.classList.remove('active-section'); 
            section.style.display = 'block'; 
            section.style.maxHeight = '';
            section.style.overflowY = '';
        });
        currentVocabActivity2Page = 0; 
        renderVocabActivity2(currentLang, true); 
    }
    toggleViewModeBtn.innerHTML = isPaginatedViewActive ? getTranslation('pagination.toggleScrollView', currentLang) : getTranslation('pagination.togglePaginatedView', currentLang);
}


toggleViewModeBtn.addEventListener('click', () => {
    isPaginatedViewActive = !isPaginatedViewActive;
    currentSectionIndex = 0; 
    updatePageLanguage(currentLang); 
});

prevSectionBtn.addEventListener('click', () => {
    if (currentSectionIndex > 0) {
        currentSectionIndex--;
        currentVocabActivity2Page = 0; 
        updateSectionVisibility();
        lessonSections[currentSectionIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
});

nextSectionBtn.addEventListener('click', () => {
    if (currentSectionIndex < lessonSections.length - 1) {
        currentSectionIndex++;
        currentVocabActivity2Page = 0; 
        updateSectionVisibility();
        lessonSections[currentSectionIndex].scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
});


document.addEventListener('DOMContentLoaded', () => {
    lessonSections = Array.from(document.querySelectorAll('#lesson-content-wrapper > .lesson-section'));
    
    setPlaceholderImage(document.getElementById('header-banner-img'), 'Leçon de Français', 'decorative-header', '63b3ed');
    setPlaceholderImage(document.getElementById('grammar-decorative-img'), 'Grammaire Visuelle', 'decorative', '38b2ac');
    setPlaceholderImage(document.getElementById('reading2-decorative-img'), 'Article Intéressant', 'decorative', '48bb78');
    
    const langButtonContainerIds = [
        "lang-buttons-vocabSection", "lang-buttons-vocabActivity1", "lang-buttons-vocabActivity2",
        "lang-buttons-grammarSection", "lang-buttons-speakingPractice", "lang-buttons-listeningPractice",
        "lang-buttons-reading1", "lang-buttons-reading2", "lang-buttons-shortActivities", "lang-buttons-conclusion"
    ];
    langButtonContainerIds.forEach(id => createSectionLanguageSwitcher(id));
    
    updatePageLanguage(currentLang); 
    updateSectionVisibility(); 
});

</script>
</body>
</html>
